{"ast":null,"code":"var _jsxFileName = \"/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatLayout.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useWebRTC } from '../../hooks/useWebRTC';\nimport { useToast } from '../UI/Toast';\nimport UserList from './UserList';\nimport ChatWindow from './ChatWindow';\nimport CallModal from '../Call/CallModal';\nimport IncomingCall from '../Call/IncomingCall';\nimport axios from 'axios';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatLayout = () => {\n  _s();\n  var _user$username, _user$username$;\n  const {\n    user,\n    logout\n  } = useAuth();\n  const {\n    socket,\n    onlineUsers\n  } = useSocket();\n  const {\n    showToast\n  } = useToast();\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [incomingCall, setIncomingCall] = useState(null);\n  const [showSidebar, setShowSidebar] = useState(true);\n  const [unreadCounts, setUnreadCounts] = useState({}); // { userId: count }\n  const [lastMessages, setLastMessages] = useState({}); // { userId: message }\n\n  const webrtc = useWebRTC(socket);\n  const isMobile = () => window.innerWidth <= 768;\n  const handleSelectUser = u => {\n    setSelectedUser(u);\n    // Reset unread count for this user\n    setUnreadCounts(prev => ({\n      ...prev,\n      [u._id]: 0\n    }));\n    if (isMobile()) setShowSidebar(false);\n  };\n  const handleBack = () => {\n    setShowSidebar(true);\n    setSelectedUser(null);\n  };\n\n  // Load users\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const {\n        data\n      } = await axios.get('/api/auth/users');\n      setUsers(data.users);\n    };\n    fetchUsers();\n  }, []);\n\n  // Load message history\n  useEffect(() => {\n    if (!selectedUser) return;\n    const fetchMessages = async () => {\n      const {\n        data\n      } = await axios.get(`/api/messages/${selectedUser._id}`);\n      setMessages(data.messages);\n    };\n    fetchMessages();\n  }, [selectedUser]);\n\n  // Listen to socket events\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('message:receive', message => {\n      var _message$sender;\n      const senderId = ((_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender._id) || message.sender;\n\n      // Update last message\n      setLastMessages(prev => ({\n        ...prev,\n        [senderId]: message\n      }));\n      if (selectedUser && senderId === selectedUser._id) {\n        setMessages(prev => [...prev, message]);\n      } else {\n        // Increment unread message count\n        setUnreadCounts(prev => ({\n          ...prev,\n          [senderId]: (prev[senderId] || 0) + 1\n        }));\n      }\n    });\n    socket.on('message:sent', message => {\n      var _message$receiver;\n      setMessages(prev => [...prev, message]);\n      const receiverId = ((_message$receiver = message.receiver) === null || _message$receiver === void 0 ? void 0 : _message$receiver._id) || message.receiver;\n      setLastMessages(prev => ({\n        ...prev,\n        [receiverId]: message\n      }));\n    });\n\n    // Handle calls\n    socket.on('call:incoming', ({\n      callerId,\n      callType,\n      offer\n    }) => {\n      const caller = users.find(u => u._id === callerId);\n      const callerName = (caller === null || caller === void 0 ? void 0 : caller.username) || 'Inconnu';\n      setIncomingCall({\n        callerId,\n        callType,\n        offer,\n        callerName\n      });\n      webrtc.setCallerId(callerId);\n      webrtc.setCallType(callType);\n      webrtc.setCallStatus('receiving');\n    });\n    socket.on('call:answered', webrtc.handleCallAnswered);\n    socket.on('call:ice-candidate', webrtc.handleICECandidate);\n    socket.on('call:ended', () => {\n      webrtc.endCall();\n      showToast({\n        title: 'Appel termin√©',\n        type: 'info'\n      });\n    });\n    socket.on('call:rejected', () => {\n      webrtc.endCall();\n      showToast({\n        title: 'Appel refus√©',\n        message: 'L\\'utilisateur a refus√© l\\'appel',\n        type: 'error'\n      });\n    });\n    socket.on('call:unavailable', () => {\n      webrtc.endCall();\n      showToast({\n        title: 'Utilisateur indisponible',\n        message: 'Impossible de joindre l\\'utilisateur',\n        type: 'warning'\n      });\n    });\n    return () => {\n      socket.off('message:receive');\n      socket.off('message:sent');\n      socket.off('call:incoming');\n      socket.off('call:answered');\n      socket.off('call:ice-candidate');\n      socket.off('call:ended');\n      socket.off('call:rejected');\n      socket.off('call:unavailable');\n    };\n  }, [socket, selectedUser, users, webrtc, showToast]);\n  const handleAcceptCall = useCallback(() => {\n    if (incomingCall) {\n      webrtc.answerCall(incomingCall.callerId, incomingCall.offer, incomingCall.callType);\n      const caller = users.find(u => u._id === incomingCall.callerId);\n      if (caller) {\n        setSelectedUser(caller);\n        if (isMobile()) setShowSidebar(false);\n      }\n      setIncomingCall(null);\n    }\n  }, [incomingCall, webrtc, users]);\n  const handleRejectCall = useCallback(() => {\n    if (incomingCall) {\n      webrtc.rejectCall(incomingCall.callerId);\n      setIncomingCall(null);\n    }\n  }, [incomingCall, webrtc]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-layout\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `sidebar ${showSidebar ? 'sidebar-visible' : 'sidebar-hidden'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avatar gradient-bg\",\n            children: user === null || user === void 0 ? void 0 : (_user$username = user.username) === null || _user$username === void 0 ? void 0 : (_user$username$ = _user$username[0]) === null || _user$username$ === void 0 ? void 0 : _user$username$.toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"username gradient-text\",\n            children: user === null || user === void 0 ? void 0 : user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          className: \"logout-btn\",\n          title: \"D\\xE9connexion\",\n          children: \"\\u23FB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UserList, {\n        users: users,\n        onlineUsers: onlineUsers,\n        selectedUser: selectedUser,\n        onSelectUser: handleSelectUser,\n        unreadCounts: unreadCounts,\n        lastMessages: lastMessages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://github.com/VoaybeDev\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"signature\",\n        children: \"Built by VoaybeDev\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `main-content ${!showSidebar ? 'main-full' : ''}`,\n      children: selectedUser ? /*#__PURE__*/_jsxDEV(ChatWindow, {\n        selectedUser: selectedUser,\n        messages: messages,\n        onlineUsers: onlineUsers,\n        onStartCall: type => webrtc.startCall(selectedUser._id, type),\n        onBack: handleBack,\n        showBackButton: !showSidebar,\n        showToast: showToast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-chat\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-chat-icon\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"gradient-text\",\n          children: \"S\\xE9lectionnez une conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Choisissez un utilisateur pour commencer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), (webrtc.callStatus === 'calling' || webrtc.callStatus === 'in-call') && /*#__PURE__*/_jsxDEV(CallModal, {\n      callType: webrtc.callType,\n      callStatus: webrtc.callStatus,\n      localStream: webrtc.localStream,\n      remoteStream: webrtc.remoteStream,\n      targetUser: selectedUser,\n      onEndCall: () => webrtc.endCall(selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser._id),\n      onToggleMic: webrtc.toggleMic,\n      onToggleCamera: webrtc.toggleCamera\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this), incomingCall && /*#__PURE__*/_jsxDEV(IncomingCall, {\n      callerName: incomingCall.callerName,\n      callType: incomingCall.callType,\n      onAccept: handleAcceptCall,\n      onReject: handleRejectCall\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatLayout, \"D9doNGg2sIY2kvbmBJoC2yKWLe8=\", false, function () {\n  return [useAuth, useSocket, useToast, useWebRTC];\n});\n_c = ChatLayout;\nexport default ChatLayout;\nvar _c;\n$RefreshReg$(_c, \"ChatLayout\");","map":{"version":3,"names":["useState","useEffect","useCallback","useSocket","useAuth","useWebRTC","useToast","UserList","ChatWindow","CallModal","IncomingCall","axios","jsxDEV","_jsxDEV","ChatLayout","_s","_user$username","_user$username$","user","logout","socket","onlineUsers","showToast","users","setUsers","selectedUser","setSelectedUser","messages","setMessages","incomingCall","setIncomingCall","showSidebar","setShowSidebar","unreadCounts","setUnreadCounts","lastMessages","setLastMessages","webrtc","isMobile","window","innerWidth","handleSelectUser","u","prev","_id","handleBack","fetchUsers","data","get","fetchMessages","on","message","_message$sender","senderId","sender","_message$receiver","receiverId","receiver","callerId","callType","offer","caller","find","callerName","username","setCallerId","setCallType","setCallStatus","handleCallAnswered","handleICECandidate","endCall","title","type","off","handleAcceptCall","answerCall","handleRejectCall","rejectCall","className","children","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSelectUser","href","target","rel","onStartCall","startCall","onBack","showBackButton","callStatus","localStream","remoteStream","targetUser","onEndCall","onToggleMic","toggleMic","onToggleCamera","toggleCamera","onAccept","onReject","_c","$RefreshReg$"],"sources":["/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatLayout.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useWebRTC } from '../../hooks/useWebRTC';\nimport { useToast } from '../UI/Toast';\nimport UserList from './UserList';\nimport ChatWindow from './ChatWindow';\nimport CallModal from '../Call/CallModal';\nimport IncomingCall from '../Call/IncomingCall';\nimport axios from 'axios';\nimport './Chat.css';\n\nconst ChatLayout = () => {\n  const { user, logout } = useAuth();\n  const { socket, onlineUsers } = useSocket();\n  const { showToast } = useToast();\n\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [incomingCall, setIncomingCall] = useState(null);\n  const [showSidebar, setShowSidebar] = useState(true);\n  const [unreadCounts, setUnreadCounts] = useState({}); // { userId: count }\n  const [lastMessages, setLastMessages] = useState({}); // { userId: message }\n\n  const webrtc = useWebRTC(socket);\n  const isMobile = () => window.innerWidth <= 768;\n\n  const handleSelectUser = (u) => {\n    setSelectedUser(u);\n    // Reset unread count for this user\n    setUnreadCounts((prev) => ({ ...prev, [u._id]: 0 }));\n    if (isMobile()) setShowSidebar(false);\n  };\n\n  const handleBack = () => {\n    setShowSidebar(true);\n    setSelectedUser(null);\n  };\n\n  // Load users\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const { data } = await axios.get('/api/auth/users');\n      setUsers(data.users);\n    };\n    fetchUsers();\n  }, []);\n\n  // Load message history\n  useEffect(() => {\n    if (!selectedUser) return;\n    const fetchMessages = async () => {\n      const { data } = await axios.get(`/api/messages/${selectedUser._id}`);\n      setMessages(data.messages);\n    };\n    fetchMessages();\n  }, [selectedUser]);\n\n  // Listen to socket events\n  useEffect(() => {\n    if (!socket) return;\n\n    socket.on('message:receive', (message) => {\n      const senderId = message.sender?._id || message.sender;\n\n      // Update last message\n      setLastMessages((prev) => ({ ...prev, [senderId]: message }));\n\n      if (selectedUser && senderId === selectedUser._id) {\n        setMessages((prev) => [...prev, message]);\n      } else {\n        // Increment unread message count\n        setUnreadCounts((prev) => ({\n          ...prev,\n          [senderId]: (prev[senderId] || 0) + 1,\n        }));\n      }\n    });\n\n    socket.on('message:sent', (message) => {\n      setMessages((prev) => [...prev, message]);\n      const receiverId = message.receiver?._id || message.receiver;\n      setLastMessages((prev) => ({ ...prev, [receiverId]: message }));\n    });\n\n    // Handle calls\n    socket.on('call:incoming', ({ callerId, callType, offer }) => {\n      const caller = users.find((u) => u._id === callerId);\n      const callerName = caller?.username || 'Inconnu';\n      setIncomingCall({ callerId, callType, offer, callerName });\n      webrtc.setCallerId(callerId);\n      webrtc.setCallType(callType);\n      webrtc.setCallStatus('receiving');\n    });\n\n    socket.on('call:answered', webrtc.handleCallAnswered);\n    socket.on('call:ice-candidate', webrtc.handleICECandidate);\n\n    socket.on('call:ended', () => {\n      webrtc.endCall();\n      showToast({ title: 'Appel termin√©', type: 'info' });\n    });\n\n    socket.on('call:rejected', () => {\n      webrtc.endCall();\n      showToast({ title: 'Appel refus√©', message: 'L\\'utilisateur a refus√© l\\'appel', type: 'error' });\n    });\n\n    socket.on('call:unavailable', () => {\n      webrtc.endCall();\n      showToast({ title: 'Utilisateur indisponible', message: 'Impossible de joindre l\\'utilisateur', type: 'warning' });\n    });\n\n    return () => {\n      socket.off('message:receive');\n      socket.off('message:sent');\n      socket.off('call:incoming');\n      socket.off('call:answered');\n      socket.off('call:ice-candidate');\n      socket.off('call:ended');\n      socket.off('call:rejected');\n      socket.off('call:unavailable');\n    };\n  }, [socket, selectedUser, users, webrtc, showToast]);\n\n  const handleAcceptCall = useCallback(() => {\n    if (incomingCall) {\n      webrtc.answerCall(incomingCall.callerId, incomingCall.offer, incomingCall.callType);\n      const caller = users.find((u) => u._id === incomingCall.callerId);\n      if (caller) {\n        setSelectedUser(caller);\n        if (isMobile()) setShowSidebar(false);\n      }\n      setIncomingCall(null);\n    }\n  }, [incomingCall, webrtc, users]);\n\n  const handleRejectCall = useCallback(() => {\n    if (incomingCall) {\n      webrtc.rejectCall(incomingCall.callerId);\n      setIncomingCall(null);\n    }\n  }, [incomingCall, webrtc]);\n\n  return (\n    <div className=\"chat-layout\">\n      {/* Sidebar */}\n      <div className={`sidebar ${showSidebar ? 'sidebar-visible' : 'sidebar-hidden'}`}>\n        <div className=\"sidebar-header\">\n          <div className=\"user-info\">\n            <div className=\"avatar gradient-bg\">{user?.username?.[0]?.toUpperCase()}</div>\n            <span className=\"username gradient-text\">{user?.username}</span>\n          </div>\n          <button onClick={logout} className=\"logout-btn\" title=\"D√©connexion\">‚èª</button>\n        </div>\n\n        <UserList\n          users={users}\n          onlineUsers={onlineUsers}\n          selectedUser={selectedUser}\n          onSelectUser={handleSelectUser}\n          unreadCounts={unreadCounts}\n          lastMessages={lastMessages}\n        />\n\n        {/* Signature */}\n        <a\n          href=\"https://github.com/VoaybeDev\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"signature\"\n        >\n          Built by VoaybeDev\n        </a>\n      </div>\n\n      {/* Main Content */}\n      <div className={`main-content ${!showSidebar ? 'main-full' : ''}`}>\n        {selectedUser ? (\n          <ChatWindow\n            selectedUser={selectedUser}\n            messages={messages}\n            onlineUsers={onlineUsers}\n            onStartCall={(type) => webrtc.startCall(selectedUser._id, type)}\n            onBack={handleBack}\n            showBackButton={!showSidebar}\n            showToast={showToast}\n          />\n        ) : (\n          <div className=\"no-chat\">\n            <div className=\"no-chat-icon\">üí¨</div>\n            <h2 className=\"gradient-text\">S√©lectionnez une conversation</h2>\n            <p>Choisissez un utilisateur pour commencer</p>\n          </div>\n        )}\n      </div>\n\n      {/* Modals */}\n      {(webrtc.callStatus === 'calling' || webrtc.callStatus === 'in-call') && (\n        <CallModal\n          callType={webrtc.callType}\n          callStatus={webrtc.callStatus}\n          localStream={webrtc.localStream}\n          remoteStream={webrtc.remoteStream}\n          targetUser={selectedUser}\n          onEndCall={() => webrtc.endCall(selectedUser?._id)}\n          onToggleMic={webrtc.toggleMic}\n          onToggleCamera={webrtc.toggleCamera}\n        />\n      )}\n\n      {incomingCall && (\n        <IncomingCall\n          callerName={incomingCall.callerName}\n          callType={incomingCall.callType}\n          onAccept={handleAcceptCall}\n          onReject={handleRejectCall}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ChatLayout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}