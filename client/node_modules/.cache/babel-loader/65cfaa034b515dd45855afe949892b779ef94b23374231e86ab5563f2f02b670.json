{"ast":null,"code":"var _jsxFileName = \"/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://localhost:5000';\nconst ALLOWED_TYPES = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'application/pdf', 'application/zip', 'application/x-zip-compressed', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/plain'];\nconst ChatWindow = ({\n  selectedUser,\n  messages,\n  onlineUsers,\n  onStartCall,\n  onBack,\n  showBackButton,\n  showToast\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    socket\n  } = useSocket();\n  const [text, setText] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [showVoice, setShowVoice] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const voice = useVoiceMessage();\n  const isOnline = onlineUsers.includes(selectedUser._id);\n\n  // Scroll automatique\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n\n  // Typing indicator\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(true);\n    });\n    socket.on('typing:stop', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(false);\n    });\n    return () => {\n      socket.off('typing:start');\n      socket.off('typing:stop');\n    };\n  }, [socket, selectedUser]);\n\n  // ‚îÄ‚îÄ Envoyer message texte\n  const sendMessage = e => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n      receiverId: selectedUser._id,\n      content: text.trim(),\n      type: 'text'\n    });\n    setText('');\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n      receiverId: selectedUser._id\n    });\n  };\n\n  // ‚îÄ‚îÄ Envoyer message vocal\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/voice`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true'\n        },\n        body: formData\n      });\n      const data = await res.json();\n      // Forward le message d√©j√† sauvegard√© (pas de double sauvegarde)\n      socket === null || socket === void 0 ? void 0 : socket.emit('message:forward', data.message);\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      showToast({\n        title: 'Erreur',\n        message: 'Impossible d\\'envoyer le message vocal',\n        type: 'error'\n      });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // ‚îÄ‚îÄ Envoyer fichier / image\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ALLOWED_TYPES.includes(file.type)) {\n      showToast({\n        title: 'Format non support√©',\n        message: 'Images, PDF, ZIP, Word, Excel, TXT seulement',\n        type: 'warning'\n      });\n      e.target.value = '';\n      return;\n    }\n    if (file.size > 20 * 1024 * 1024) {\n      showToast({\n        title: 'Fichier trop lourd',\n        message: 'Maximum 20MB',\n        type: 'warning'\n      });\n      e.target.value = '';\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('receiverId', selectedUser._id);\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/file`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true'\n        },\n        body: formData\n      });\n      const data = await res.json();\n\n      // ‚úÖ Forward uniquement ‚Äî pas de double sauvegarde\n      socket === null || socket === void 0 ? void 0 : socket.emit('message:forward', data.message);\n      showToast({\n        title: 'Fichier envoy√© !',\n        type: 'success'\n      });\n    } catch (err) {\n      showToast({\n        title: 'Erreur upload',\n        message: err.message,\n        type: 'error'\n      });\n    } finally {\n      setUploading(false);\n      e.target.value = '';\n    }\n  };\n\n  // ‚îÄ‚îÄ Typing handler\n  const handleTextChange = e => {\n    setText(e.target.value);\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:start', {\n      receiverId: selectedUser._id\n    });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n        receiverId: selectedUser._id\n      });\n    }, 1500);\n  };\n\n  // ‚îÄ‚îÄ Appels (onPointerDown pour mobile)\n  const handleCall = type => e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onStartCall(type);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-user-info\",\n        children: [showBackButton && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-btn\",\n          onClick: onBack,\n          children: \"\\u2190\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-avatar gradient-bg\",\n          children: selectedUser.username[0].toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"gradient-text\",\n            children: selectedUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `chat-status ${isOnline ? 'online' : 'offline'}`,\n            children: isTyping ? '‚úçÔ∏è En train d\\'√©crire...' : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"call-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn audio\",\n          onPointerDown: handleCall('audio'),\n          title: \"Appel vocal\",\n          children: \"\\uD83D\\uDCDE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn video\",\n          onPointerDown: handleCall('video'),\n          title: \"Appel vid\\xE9o\",\n          children: \"\\uD83D\\uDCF9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [messages.map((msg, i) => {\n        var _msg$sender;\n        return /*#__PURE__*/_jsxDEV(MessageBubble, {\n          message: msg,\n          isOwn: (((_msg$sender = msg.sender) === null || _msg$sender === void 0 ? void 0 : _msg$sender._id) || msg.sender) === user._id || msg.senderId === user._id\n        }, msg._id || i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this);\n      }), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), showVoice && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voice-recorder\",\n      children: voice.isRecording ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recording-active\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rec-dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rec-timer\",\n          children: voice.formatDuration(voice.duration)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.stopRecording,\n          className: \"stop-rec-btn\",\n          children: \"\\u23F9 Stop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }, this) : voice.audioUrl ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"audio-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          src: voice.audioUrl,\n          controls: true,\n          className: \"audio-preview-player\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: sendVoiceMessage,\n          className: \"send-voice-btn\",\n          disabled: uploading,\n          children: uploading ? '‚è≥' : '‚û§ Envoyer'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"start-recording\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.startRecording,\n          className: \"start-rec-btn\",\n          children: \"\\uD83C\\uDFA4 Enregistrer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: () => setShowVoice(false),\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"message-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `voice-toggle-btn ${showVoice ? 'active' : ''}`,\n        onPointerDown: () => setShowVoice(!showVoice),\n        title: \"Message vocal\",\n        children: \"\\uD83C\\uDFA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"file-btn\",\n        onPointerDown: () => {\n          var _fileInputRef$current;\n          return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n        },\n        title: \"Joindre un fichier\",\n        disabled: uploading,\n        children: uploading ? '‚è≥' : 'üìé'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        accept: \"image/*,.pdf,.zip,.doc,.docx,.xls,.xlsx,.txt\",\n        onChange: handleFileChange,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: `Message √† ${selectedUser.username}...`,\n        value: text,\n        onChange: handleTextChange,\n        className: \"text-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-btn\",\n        disabled: !text.trim(),\n        children: \"\\u27A4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"rJ1fFXmlQCuGWjy9Kgk8DnMZI/4=\", false, function () {\n  return [useAuth, useSocket, useVoiceMessage];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["useState","useRef","useEffect","useSocket","useAuth","useVoiceMessage","MessageBubble","jsxDEV","_jsxDEV","SERVER_URL","process","env","REACT_APP_SERVER_URL","ALLOWED_TYPES","ChatWindow","selectedUser","messages","onlineUsers","onStartCall","onBack","showBackButton","showToast","_s","user","socket","text","setText","isTyping","setIsTyping","showVoice","setShowVoice","uploading","setUploading","messagesEndRef","typingTimerRef","fileInputRef","voice","isOnline","includes","_id","_messagesEndRef$curre","current","scrollIntoView","behavior","on","userId","off","sendMessage","e","preventDefault","trim","emit","receiverId","content","type","sendVoiceMessage","audioBlob","formData","FormData","append","res","fetch","method","headers","Authorization","localStorage","getItem","body","data","json","message","resetAudio","err","title","handleFileChange","file","target","files","value","size","handleTextChange","clearTimeout","setTimeout","handleCall","stopPropagation","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","username","toUpperCase","onPointerDown","map","msg","i","_msg$sender","isOwn","sender","senderId","ref","isRecording","formatDuration","duration","stopRecording","cancelRecording","audioUrl","src","controls","disabled","startRecording","onSubmit","_fileInputRef$current","click","accept","onChange","style","display","placeholder","_c","$RefreshReg$"],"sources":["/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://localhost:5000';\n\nconst ALLOWED_TYPES = [\n  'image/jpeg', 'image/png', 'image/gif', 'image/webp',\n  'application/pdf',\n  'application/zip', 'application/x-zip-compressed',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  'text/plain',\n];\n\nconst ChatWindow = ({\n  selectedUser, messages, onlineUsers,\n  onStartCall, onBack, showBackButton, showToast,\n}) => {\n  const { user }   = useAuth();\n  const { socket } = useSocket();\n\n  const [text,      setText]      = useState('');\n  const [isTyping,  setIsTyping]  = useState(false);\n  const [showVoice, setShowVoice] = useState(false);\n  const [uploading, setUploading] = useState(false);\n\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const fileInputRef   = useRef(null);\n  const voice          = useVoiceMessage();\n  const isOnline       = onlineUsers.includes(selectedUser._id);\n\n  // Scroll automatique\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Typing indicator\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({ userId }) => {\n      if (userId === selectedUser._id) setIsTyping(true);\n    });\n    socket.on('typing:stop', ({ userId }) => {\n      if (userId === selectedUser._id) setIsTyping(false);\n    });\n    return () => {\n      socket.off('typing:start');\n      socket.off('typing:stop');\n    };\n  }, [socket, selectedUser]);\n\n  // ‚îÄ‚îÄ Envoyer message texte\n  const sendMessage = (e) => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket?.emit('message:send', {\n      receiverId: selectedUser._id,\n      content: text.trim(),\n      type: 'text',\n    });\n    setText('');\n    socket?.emit('typing:stop', { receiverId: selectedUser._id });\n  };\n\n  // ‚îÄ‚îÄ Envoyer message vocal\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/voice`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true',\n        },\n        body: formData,\n      });\n      const data = await res.json();\n      // Forward le message d√©j√† sauvegard√© (pas de double sauvegarde)\n      socket?.emit('message:forward', data.message);\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      showToast({ title: 'Erreur', message: 'Impossible d\\'envoyer le message vocal', type: 'error' });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // ‚îÄ‚îÄ Envoyer fichier / image\n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    if (!ALLOWED_TYPES.includes(file.type)) {\n      showToast({\n        title: 'Format non support√©',\n        message: 'Images, PDF, ZIP, Word, Excel, TXT seulement',\n        type: 'warning',\n      });\n      e.target.value = '';\n      return;\n    }\n    if (file.size > 20 * 1024 * 1024) {\n      showToast({ title: 'Fichier trop lourd', message: 'Maximum 20MB', type: 'warning' });\n      e.target.value = '';\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('receiverId', selectedUser._id);\n\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/file`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true',\n        },\n        body: formData,\n      });\n      const data = await res.json();\n\n      // ‚úÖ Forward uniquement ‚Äî pas de double sauvegarde\n      socket?.emit('message:forward', data.message);\n      showToast({ title: 'Fichier envoy√© !', type: 'success' });\n    } catch (err) {\n      showToast({ title: 'Erreur upload', message: err.message, type: 'error' });\n    } finally {\n      setUploading(false);\n      e.target.value = '';\n    }\n  };\n\n  // ‚îÄ‚îÄ Typing handler\n  const handleTextChange = (e) => {\n    setText(e.target.value);\n    socket?.emit('typing:start', { receiverId: selectedUser._id });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket?.emit('typing:stop', { receiverId: selectedUser._id });\n    }, 1500);\n  };\n\n  // ‚îÄ‚îÄ Appels (onPointerDown pour mobile)\n  const handleCall = (type) => (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    onStartCall(type);\n  };\n\n  return (\n    <div className=\"chat-window\">\n\n      {/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */}\n      <div className=\"chat-header\">\n        <div className=\"chat-user-info\">\n          {showBackButton && (\n            <button className=\"back-btn\" onClick={onBack}>‚Üê</button>\n          )}\n          <div className=\"chat-avatar gradient-bg\">\n            {selectedUser.username[0].toUpperCase()}\n          </div>\n          <div>\n            <h3 className=\"gradient-text\">{selectedUser.username}</h3>\n            <span className={`chat-status ${isOnline ? 'online' : 'offline'}`}>\n              {isTyping\n                ? '‚úçÔ∏è En train d\\'√©crire...'\n                : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"call-buttons\">\n          <button\n            className=\"call-btn audio\"\n            onPointerDown={handleCall('audio')}\n            title=\"Appel vocal\"\n          >üìû</button>\n          <button\n            className=\"call-btn video\"\n            onPointerDown={handleCall('video')}\n            title=\"Appel vid√©o\"\n          >üìπ</button>\n        </div>\n      </div>\n\n      {/* ‚îÄ‚îÄ MESSAGES ‚îÄ‚îÄ */}\n      <div className=\"messages-container\">\n        {messages.map((msg, i) => (\n          <MessageBubble\n            key={msg._id || i}\n            message={msg}\n            isOwn={\n              (msg.sender?._id || msg.sender) === user._id ||\n              msg.senderId === user._id\n            }\n          />\n        ))}\n        {isTyping && (\n          <div className=\"typing-indicator\">\n            <span /><span /><span />\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* ‚îÄ‚îÄ VOICE RECORDER ‚îÄ‚îÄ */}\n      {showVoice && (\n        <div className=\"voice-recorder\">\n          {voice.isRecording ? (\n            <div className=\"recording-active\">\n              <div className=\"rec-dot\" />\n              <span className=\"rec-timer\">{voice.formatDuration(voice.duration)}</span>\n              <button onPointerDown={voice.stopRecording}   className=\"stop-rec-btn\">‚èπ Stop</button>\n              <button onPointerDown={voice.cancelRecording} className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          ) : voice.audioUrl ? (\n            <div className=\"audio-preview\">\n              <audio src={voice.audioUrl} controls className=\"audio-preview-player\" />\n              <button\n                onPointerDown={sendVoiceMessage}\n                className=\"send-voice-btn\"\n                disabled={uploading}\n              >\n                {uploading ? '‚è≥' : '‚û§ Envoyer'}\n              </button>\n              <button onPointerDown={voice.cancelRecording} className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          ) : (\n            <div className=\"start-recording\">\n              <button onPointerDown={voice.startRecording}      className=\"start-rec-btn\">üé§ Enregistrer</button>\n              <button onPointerDown={() => setShowVoice(false)} className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* ‚îÄ‚îÄ INPUT ‚îÄ‚îÄ */}\n      <form onSubmit={sendMessage} className=\"message-input\">\n        {/* Micro */}\n        <button\n          type=\"button\"\n          className={`voice-toggle-btn ${showVoice ? 'active' : ''}`}\n          onPointerDown={() => setShowVoice(!showVoice)}\n          title=\"Message vocal\"\n        >üé§</button>\n\n        {/* Fichier */}\n        <button\n          type=\"button\"\n          className=\"file-btn\"\n          onPointerDown={() => fileInputRef.current?.click()}\n          title=\"Joindre un fichier\"\n          disabled={uploading}\n        >\n          {uploading ? '‚è≥' : 'üìé'}\n        </button>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"image/*,.pdf,.zip,.doc,.docx,.xls,.xlsx,.txt\"\n          onChange={handleFileChange}\n          style={{ display: 'none' }}\n        />\n\n        {/* Texte */}\n        <input\n          type=\"text\"\n          placeholder={`Message √† ${selectedUser.username}...`}\n          value={text}\n          onChange={handleTextChange}\n          className=\"text-input\"\n        />\n\n        {/* Envoyer */}\n        <button type=\"submit\" className=\"send-btn\" disabled={!text.trim()}>‚û§</button>\n      </form>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}