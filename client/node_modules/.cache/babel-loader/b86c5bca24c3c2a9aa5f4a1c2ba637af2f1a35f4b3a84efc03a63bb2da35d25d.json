{"ast":null,"code":"var _jsxFileName = \"/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://localhost:5000';\nconst ChatWindow = ({\n  selectedUser,\n  messages,\n  onlineUsers,\n  onStartCall,\n  onBack,\n  showBackButton\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    socket\n  } = useSocket();\n  const [text, setText] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [showVoice, setShowVoice] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const voice = useVoiceMessage();\n  const isOnline = onlineUsers.includes(selectedUser._id);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(true);\n    });\n    socket.on('typing:stop', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(false);\n    });\n    return () => {\n      socket.off('typing:start');\n      socket.off('typing:stop');\n    };\n  }, [socket, selectedUser]);\n  const sendMessage = e => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n      receiverId: selectedUser._id,\n      content: text.trim(),\n      type: 'text'\n    });\n    setText('');\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n      receiverId: selectedUser._id\n    });\n  };\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n    try {\n      const res = await fetch(`${SERVER_URL}/api/messages/voice`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true' // ‚Üê ajoute cette ligne\n        },\n        body: formData\n      });\n      const data = await res.json();\n      socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n        receiverId: selectedUser._id,\n        content: '',\n        type: 'voice',\n        audioUrl: data.message.audioUrl\n      });\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      console.error('Erreur envoi vocal:', err);\n    }\n  };\n  const handleTextChange = e => {\n    setText(e.target.value);\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:start', {\n      receiverId: selectedUser._id\n    });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n        receiverId: selectedUser._id\n      });\n    }, 1500);\n  };\n\n  // Handler unifi√© touch + click pour les boutons d'appel\n  const handleCall = type => e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onStartCall(type);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-user-info\",\n        children: [showBackButton && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-btn\",\n          onClick: onBack,\n          children: \"\\u2190\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-avatar\",\n          children: selectedUser.username[0].toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `chat-status ${isOnline ? 'online' : 'offline'}`,\n            children: isTyping ? '‚úçÔ∏è En train d\\'√©crire...' : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"call-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn audio\",\n          onPointerDown: handleCall('audio'),\n          title: \"Appel vocal\",\n          children: \"\\uD83D\\uDCDE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn video\",\n          onPointerDown: handleCall('video'),\n          title: \"Appel vid\\xE9o\",\n          children: \"\\uD83D\\uDCF9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [messages.map((msg, i) => {\n        var _msg$sender;\n        return /*#__PURE__*/_jsxDEV(MessageBubble, {\n          message: msg,\n          isOwn: (((_msg$sender = msg.sender) === null || _msg$sender === void 0 ? void 0 : _msg$sender._id) || msg.sender) === user._id || msg.senderId === user._id\n        }, msg._id || i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this);\n      }), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), showVoice && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voice-recorder\",\n      children: voice.isRecording ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recording-active\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rec-dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rec-timer\",\n          children: voice.formatDuration(voice.duration)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.stopRecording,\n          className: \"stop-rec-btn\",\n          children: \"\\u23F9 Stop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }, this) : voice.audioUrl ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"audio-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          src: voice.audioUrl,\n          controls: true,\n          className: \"audio-preview-player\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: sendVoiceMessage,\n          className: \"send-voice-btn\",\n          children: \"\\u27A4 Envoyer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"start-recording\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.startRecording,\n          className: \"start-rec-btn\",\n          children: \"\\uD83C\\uDFA4 Enregistrer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: () => setShowVoice(false),\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"message-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `voice-toggle-btn ${showVoice ? 'active' : ''}`,\n        onPointerDown: () => setShowVoice(!showVoice),\n        children: \"\\uD83C\\uDFA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: `Message √† ${selectedUser.username}...`,\n        value: text,\n        onChange: handleTextChange,\n        className: \"text-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-btn\",\n        disabled: !text.trim(),\n        children: \"\\u27A4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"eRkvwciEapXc3uUeA70UAgtA4N8=\", false, function () {\n  return [useAuth, useSocket, useVoiceMessage];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["useState","useRef","useEffect","useSocket","useAuth","useVoiceMessage","MessageBubble","jsxDEV","_jsxDEV","SERVER_URL","process","env","REACT_APP_SERVER_URL","ChatWindow","selectedUser","messages","onlineUsers","onStartCall","onBack","showBackButton","_s","user","socket","text","setText","isTyping","setIsTyping","showVoice","setShowVoice","messagesEndRef","typingTimerRef","voice","isOnline","includes","_id","_messagesEndRef$curre","current","scrollIntoView","behavior","on","userId","off","sendMessage","e","preventDefault","trim","emit","receiverId","content","type","sendVoiceMessage","audioBlob","formData","FormData","append","res","fetch","method","headers","Authorization","localStorage","getItem","body","data","json","audioUrl","message","resetAudio","err","console","error","handleTextChange","target","value","clearTimeout","setTimeout","handleCall","stopPropagation","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","username","toUpperCase","onPointerDown","title","map","msg","i","_msg$sender","isOwn","sender","senderId","ref","isRecording","formatDuration","duration","stopRecording","cancelRecording","src","controls","startRecording","onSubmit","placeholder","onChange","disabled","_c","$RefreshReg$"],"sources":["/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://localhost:5000';\n\nconst ChatWindow = ({ selectedUser, messages, onlineUsers, onStartCall, onBack, showBackButton }) => {\n  const { user }   = useAuth();\n  const { socket } = useSocket();\n  const [text,      setText]      = useState('');\n  const [isTyping,  setIsTyping]  = useState(false);\n  const [showVoice, setShowVoice] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const voice = useVoiceMessage();\n  const isOnline = onlineUsers.includes(selectedUser._id);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({ userId }) => {\n      if (userId === selectedUser._id) setIsTyping(true);\n    });\n    socket.on('typing:stop', ({ userId }) => {\n      if (userId === selectedUser._id) setIsTyping(false);\n    });\n    return () => {\n      socket.off('typing:start');\n      socket.off('typing:stop');\n    };\n  }, [socket, selectedUser]);\n\n  const sendMessage = (e) => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket?.emit('message:send', {\n      receiverId: selectedUser._id,\n      content: text.trim(),\n      type: 'text',\n    });\n    setText('');\n    socket?.emit('typing:stop', { receiverId: selectedUser._id });\n  };\n\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n    try {\n      const res = await fetch(`${SERVER_URL}/api/messages/voice`, {\n  method: 'POST',\n  headers: {\n    Authorization: `Bearer ${localStorage.getItem('token')}`,\n    'ngrok-skip-browser-warning': 'true',  // ‚Üê ajoute cette ligne\n  },\n  body: formData,\n});\n      const data = await res.json();\n      socket?.emit('message:send', {\n        receiverId: selectedUser._id,\n        content: '',\n        type: 'voice',\n        audioUrl: data.message.audioUrl,\n      });\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      console.error('Erreur envoi vocal:', err);\n    }\n  };\n\n  const handleTextChange = (e) => {\n    setText(e.target.value);\n    socket?.emit('typing:start', { receiverId: selectedUser._id });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket?.emit('typing:stop', { receiverId: selectedUser._id });\n    }, 1500);\n  };\n\n  // Handler unifi√© touch + click pour les boutons d'appel\n  const handleCall = (type) => (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    onStartCall(type);\n  };\n\n  return (\n    <div className=\"chat-window\">\n      {/* Header */}\n      <div className=\"chat-header\">\n        <div className=\"chat-user-info\">\n          {/* Bouton retour mobile */}\n          {showBackButton && (\n            <button className=\"back-btn\" onClick={onBack}>‚Üê</button>\n          )}\n          <div className=\"chat-avatar\">{selectedUser.username[0].toUpperCase()}</div>\n          <div>\n            <h3>{selectedUser.username}</h3>\n            <span className={`chat-status ${isOnline ? 'online' : 'offline'}`}>\n              {isTyping ? '‚úçÔ∏è En train d\\'√©crire...' : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"call-buttons\">\n          {/* onPointerDown pour compatibilit√© mobile */}\n          <button\n            className=\"call-btn audio\"\n            onPointerDown={handleCall('audio')}\n            title=\"Appel vocal\"\n          >\n            üìû\n          </button>\n          <button\n            className=\"call-btn video\"\n            onPointerDown={handleCall('video')}\n            title=\"Appel vid√©o\"\n          >\n            üìπ\n          </button>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"messages-container\">\n        {messages.map((msg, i) => (\n          <MessageBubble\n            key={msg._id || i}\n            message={msg}\n            isOwn={\n              (msg.sender?._id || msg.sender) === user._id ||\n              msg.senderId === user._id\n            }\n          />\n        ))}\n        {isTyping && (\n          <div className=\"typing-indicator\">\n            <span /><span /><span />\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Zone message vocal */}\n      {showVoice && (\n        <div className=\"voice-recorder\">\n          {voice.isRecording ? (\n            <div className=\"recording-active\">\n              <div className=\"rec-dot\" />\n              <span className=\"rec-timer\">{voice.formatDuration(voice.duration)}</span>\n              <button onPointerDown={voice.stopRecording} className=\"stop-rec-btn\">‚èπ Stop</button>\n              <button onPointerDown={voice.cancelRecording} className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          ) : voice.audioUrl ? (\n            <div className=\"audio-preview\">\n              <audio src={voice.audioUrl} controls className=\"audio-preview-player\" />\n              <button onPointerDown={sendVoiceMessage} className=\"send-voice-btn\">‚û§ Envoyer</button>\n              <button onPointerDown={voice.cancelRecording} className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          ) : (\n            <div className=\"start-recording\">\n              <button onPointerDown={voice.startRecording} className=\"start-rec-btn\">\n                üé§ Enregistrer\n              </button>\n              <button onPointerDown={() => setShowVoice(false)} className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Input */}\n      <form onSubmit={sendMessage} className=\"message-input\">\n        <button\n          type=\"button\"\n          className={`voice-toggle-btn ${showVoice ? 'active' : ''}`}\n          onPointerDown={() => setShowVoice(!showVoice)}\n        >\n          üé§\n        </button>\n        <input\n          type=\"text\"\n          placeholder={`Message √† ${selectedUser.username}...`}\n          value={text}\n          onChange={handleTextChange}\n          className=\"text-input\"\n        />\n        <button type=\"submit\" className=\"send-btn\" disabled={!text.trim()}>‚û§</button>\n      </form>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}