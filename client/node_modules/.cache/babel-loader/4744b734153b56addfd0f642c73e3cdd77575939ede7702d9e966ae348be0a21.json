{"ast":null,"code":"var _jsxFileName = \"/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = ({\n  selectedUser,\n  messages,\n  onlineUsers,\n  onStartCall\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    socket\n  } = useSocket();\n  const [text, setText] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [showVoice, setShowVoice] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const voice = useVoiceMessage();\n  const isOnline = onlineUsers.includes(selectedUser._id);\n\n  // Scroll vers le bas √† chaque nouveau message\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n\n  // √âcouter le typing\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(true);\n    });\n    socket.on('typing:stop', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(false);\n    });\n    return () => {\n      socket.off('typing:start');\n      socket.off('typing:stop');\n    };\n  }, [socket, selectedUser]);\n\n  // Envoyer message texte\n  const sendMessage = e => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n      receiverId: selectedUser._id,\n      content: text.trim(),\n      type: 'text'\n    });\n    setText('');\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n      receiverId: selectedUser._id\n    });\n  };\n\n  // Envoyer message vocal\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n    try {\n      const res = await fetch('http://localhost:5000/api/messages/voice', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        body: formData\n      });\n      const data = await res.json();\n      // Notifier via socket\n      socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n        receiverId: selectedUser._id,\n        content: '',\n        type: 'voice',\n        audioUrl: data.message.audioUrl\n      });\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      console.error('Erreur envoi vocal:', err);\n    }\n  };\n\n  // Gestion du typing\n  const handleTextChange = e => {\n    setText(e.target.value);\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:start', {\n      receiverId: selectedUser._id\n    });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n        receiverId: selectedUser._id\n      });\n    }, 1500);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-avatar\",\n          children: selectedUser.username[0].toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `chat-status ${isOnline ? 'online' : 'offline'}`,\n            children: isTyping ? '‚úçÔ∏è En train d\\'√©crire...' : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"call-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn audio\",\n          onClick: () => onStartCall('audio'),\n          title: \"Appel vocal\",\n          children: \"\\uD83D\\uDCDE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn video\",\n          onClick: () => onStartCall('video'),\n          title: \"Appel vid\\xE9o\",\n          children: \"\\uD83D\\uDCF9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [messages.map((msg, i) => {\n        var _msg$sender;\n        return /*#__PURE__*/_jsxDEV(MessageBubble, {\n          message: msg,\n          isOwn: (((_msg$sender = msg.sender) === null || _msg$sender === void 0 ? void 0 : _msg$sender._id) || msg.sender) === user._id || msg.senderId === user._id\n        }, msg._id || i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this);\n      }), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), showVoice && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voice-recorder\",\n      children: voice.isRecording ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recording-active\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rec-dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: voice.formatDuration(voice.duration)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: voice.stopRecording,\n          className: \"stop-rec-btn\",\n          children: \"\\u23F9 Arr\\xEAter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }, this) : voice.audioUrl ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"audio-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          src: voice.audioUrl,\n          controls: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendVoiceMessage,\n          className: \"send-voice-btn\",\n          children: \"\\u27A4 Envoyer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715 Annuler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"start-recording\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: voice.startRecording,\n          className: \"start-rec-btn\",\n          children: \"\\uD83C\\uDFA4 D\\xE9marrer l'enregistrement\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowVoice(false),\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"message-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `voice-toggle-btn ${showVoice ? 'active' : ''}`,\n        onClick: () => setShowVoice(!showVoice),\n        title: \"Message vocal\",\n        children: \"\\uD83C\\uDFA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: `Message √† ${selectedUser.username}...`,\n        value: text,\n        onChange: handleTextChange,\n        className: \"text-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-btn\",\n        disabled: !text.trim(),\n        children: \"\\u27A4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"eRkvwciEapXc3uUeA70UAgtA4N8=\", false, function () {\n  return [useAuth, useSocket, useVoiceMessage];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["useState","useRef","useEffect","useSocket","useAuth","useVoiceMessage","MessageBubble","jsxDEV","_jsxDEV","ChatWindow","selectedUser","messages","onlineUsers","onStartCall","_s","user","socket","text","setText","isTyping","setIsTyping","showVoice","setShowVoice","messagesEndRef","typingTimerRef","voice","isOnline","includes","_id","_messagesEndRef$curre","current","scrollIntoView","behavior","on","userId","off","sendMessage","e","preventDefault","trim","emit","receiverId","content","type","sendVoiceMessage","audioBlob","formData","FormData","append","res","fetch","method","headers","Authorization","localStorage","getItem","body","data","json","audioUrl","message","resetAudio","err","console","error","handleTextChange","target","value","clearTimeout","setTimeout","className","children","username","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","map","msg","i","_msg$sender","isOwn","sender","senderId","ref","isRecording","formatDuration","duration","stopRecording","cancelRecording","src","controls","startRecording","onSubmit","placeholder","onChange","disabled","_c","$RefreshReg$"],"sources":["/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\n\nconst ChatWindow = ({ selectedUser, messages, onlineUsers, onStartCall }) => {\n  const { user } = useAuth();\n  const { socket } = useSocket();\n  const [text,      setText]      = useState('');\n  const [isTyping,  setIsTyping]  = useState(false);\n  const [showVoice, setShowVoice] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n\n  const voice = useVoiceMessage();\n  const isOnline = onlineUsers.includes(selectedUser._id);\n\n  // Scroll vers le bas √† chaque nouveau message\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // √âcouter le typing\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({ userId }) => {\n      if (userId === selectedUser._id) setIsTyping(true);\n    });\n    socket.on('typing:stop', ({ userId }) => {\n      if (userId === selectedUser._id) setIsTyping(false);\n    });\n    return () => {\n      socket.off('typing:start');\n      socket.off('typing:stop');\n    };\n  }, [socket, selectedUser]);\n\n  // Envoyer message texte\n  const sendMessage = (e) => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket?.emit('message:send', {\n      receiverId: selectedUser._id,\n      content: text.trim(),\n      type: 'text',\n    });\n    setText('');\n    socket?.emit('typing:stop', { receiverId: selectedUser._id });\n  };\n\n  // Envoyer message vocal\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n\n    try {\n      const res = await fetch('http://localhost:5000/api/messages/voice', {\n        method: 'POST',\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n        body: formData,\n      });\n      const data = await res.json();\n      // Notifier via socket\n      socket?.emit('message:send', {\n        receiverId: selectedUser._id,\n        content: '',\n        type: 'voice',\n        audioUrl: data.message.audioUrl,\n      });\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      console.error('Erreur envoi vocal:', err);\n    }\n  };\n\n  // Gestion du typing\n  const handleTextChange = (e) => {\n    setText(e.target.value);\n    socket?.emit('typing:start', { receiverId: selectedUser._id });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket?.emit('typing:stop', { receiverId: selectedUser._id });\n    }, 1500);\n  };\n\n  return (\n    <div className=\"chat-window\">\n      {/* Header */}\n      <div className=\"chat-header\">\n        <div className=\"chat-user-info\">\n          <div className=\"chat-avatar\">{selectedUser.username[0].toUpperCase()}</div>\n          <div>\n            <h3>{selectedUser.username}</h3>\n            <span className={`chat-status ${isOnline ? 'online' : 'offline'}`}>\n              {isTyping ? '‚úçÔ∏è En train d\\'√©crire...' : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"call-buttons\">\n          <button\n            className=\"call-btn audio\"\n            onClick={() => onStartCall('audio')}\n            title=\"Appel vocal\"\n          >\n            üìû\n          </button>\n          <button\n            className=\"call-btn video\"\n            onClick={() => onStartCall('video')}\n            title=\"Appel vid√©o\"\n          >\n            üìπ\n          </button>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"messages-container\">\n        {messages.map((msg, i) => (\n          <MessageBubble\n            key={msg._id || i}\n            message={msg}\n            isOwn={\n              (msg.sender?._id || msg.sender) === user._id ||\n              msg.senderId === user._id\n            }\n          />\n        ))}\n        {isTyping && (\n          <div className=\"typing-indicator\">\n            <span /><span /><span />\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Zone message vocal */}\n      {showVoice && (\n        <div className=\"voice-recorder\">\n          {voice.isRecording ? (\n            <div className=\"recording-active\">\n              <div className=\"rec-dot\" />\n              <span>{voice.formatDuration(voice.duration)}</span>\n              <button onClick={voice.stopRecording} className=\"stop-rec-btn\">\n                ‚èπ Arr√™ter\n              </button>\n              <button onClick={voice.cancelRecording} className=\"cancel-rec-btn\">\n                ‚úï\n              </button>\n            </div>\n          ) : voice.audioUrl ? (\n            <div className=\"audio-preview\">\n              <audio src={voice.audioUrl} controls />\n              <button onClick={sendVoiceMessage} className=\"send-voice-btn\">\n                ‚û§ Envoyer\n              </button>\n              <button onClick={voice.cancelRecording} className=\"cancel-rec-btn\">\n                ‚úï Annuler\n              </button>\n            </div>\n          ) : (\n            <div className=\"start-recording\">\n              <button onClick={voice.startRecording} className=\"start-rec-btn\">\n                üé§ D√©marrer l'enregistrement\n              </button>\n              <button onClick={() => setShowVoice(false)} className=\"cancel-rec-btn\">\n                ‚úï\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Input */}\n      <form onSubmit={sendMessage} className=\"message-input\">\n        <button\n          type=\"button\"\n          className={`voice-toggle-btn ${showVoice ? 'active' : ''}`}\n          onClick={() => setShowVoice(!showVoice)}\n          title=\"Message vocal\"\n        >\n          üé§\n        </button>\n        <input\n          type=\"text\"\n          placeholder={`Message √† ${selectedUser.username}...`}\n          value={text}\n          onChange={handleTextChange}\n          className=\"text-input\"\n        />\n        <button type=\"submit\" className=\"send-btn\" disabled={!text.trim()}>\n          ‚û§\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}