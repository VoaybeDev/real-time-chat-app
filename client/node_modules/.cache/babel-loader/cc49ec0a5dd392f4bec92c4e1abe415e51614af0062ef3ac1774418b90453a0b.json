{"ast":null,"code":"var _jsxFileName = \"/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://localhost:5000';\nconst ALLOWED_TYPES = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'application/pdf', 'application/zip', 'application/x-zip-compressed', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/plain'];\nconst ChatWindow = ({\n  selectedUser,\n  messages,\n  onlineUsers,\n  onStartCall,\n  onBack,\n  showBackButton,\n  showToast\n}) => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const {\n    socket\n  } = useSocket();\n  const [text, setText] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [showVoice, setShowVoice] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const voice = useVoiceMessage();\n  const isOnline = onlineUsers.includes(selectedUser._id);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(true);\n    });\n    socket.on('typing:stop', ({\n      userId\n    }) => {\n      if (userId === selectedUser._id) setIsTyping(false);\n    });\n    return () => {\n      socket.off('typing:start');\n      socket.off('typing:stop');\n    };\n  }, [socket, selectedUser]);\n\n  // Envoyer message texte\n  const sendMessage = e => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n      receiverId: selectedUser._id,\n      content: text.trim(),\n      type: 'text'\n    });\n    setText('');\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n      receiverId: selectedUser._id\n    });\n  };\n\n  // Envoyer message vocal\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/voice`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true'\n        },\n        body: formData\n      });\n      const data = await res.json();\n      socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n        receiverId: selectedUser._id,\n        content: '',\n        type: 'voice',\n        audioUrl: data.message.audioUrl\n      });\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      showToast({\n        title: 'Erreur',\n        message: 'Impossible d\\'envoyer le message vocal',\n        type: 'error'\n      });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Envoyer fichier/image\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!ALLOWED_TYPES.includes(file.type)) {\n      showToast({\n        title: 'Format non support√©',\n        message: 'Images, PDF, ZIP, Word, Excel, TXT seulement',\n        type: 'warning'\n      });\n      return;\n    }\n    if (file.size > 20 * 1024 * 1024) {\n      showToast({\n        title: 'Fichier trop lourd',\n        message: 'Maximum 20MB',\n        type: 'warning'\n      });\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('receiverId', selectedUser._id);\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/file`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true'\n        },\n        body: formData\n      });\n      const data = await res.json();\n      const isImage = file.type.startsWith('image/');\n      socket === null || socket === void 0 ? void 0 : socket.emit('message:send', {\n        receiverId: selectedUser._id,\n        content: '',\n        type: isImage ? 'image' : 'file',\n        fileUrl: data.message.fileUrl,\n        fileName: data.message.fileName,\n        fileSize: data.message.fileSize\n      });\n      showToast({\n        title: 'Fichier envoy√© !',\n        type: 'success'\n      });\n    } catch (err) {\n      showToast({\n        title: 'Erreur upload',\n        message: err.message,\n        type: 'error'\n      });\n    } finally {\n      setUploading(false);\n      e.target.value = '';\n    }\n  };\n  const handleTextChange = e => {\n    setText(e.target.value);\n    socket === null || socket === void 0 ? void 0 : socket.emit('typing:start', {\n      receiverId: selectedUser._id\n    });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket === null || socket === void 0 ? void 0 : socket.emit('typing:stop', {\n        receiverId: selectedUser._id\n      });\n    }, 1500);\n  };\n  const handleCall = type => e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onStartCall(type);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-user-info\",\n        children: [showBackButton && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-btn\",\n          onClick: onBack,\n          children: \"\\u2190\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-avatar gradient-bg\",\n          children: selectedUser.username[0].toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"gradient-text\",\n            children: selectedUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `chat-status ${isOnline ? 'online' : 'offline'}`,\n            children: isTyping ? '‚úçÔ∏è En train d\\'√©crire...' : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"call-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn audio\",\n          onPointerDown: handleCall('audio'),\n          title: \"Appel vocal\",\n          children: \"\\uD83D\\uDCDE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"call-btn video\",\n          onPointerDown: handleCall('video'),\n          title: \"Appel vid\\xE9o\",\n          children: \"\\uD83D\\uDCF9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [messages.map((msg, i) => {\n        var _msg$sender;\n        return /*#__PURE__*/_jsxDEV(MessageBubble, {\n          message: msg,\n          isOwn: (((_msg$sender = msg.sender) === null || _msg$sender === void 0 ? void 0 : _msg$sender._id) || msg.sender) === user._id || msg.senderId === user._id\n        }, msg._id || i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this);\n      }), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 45\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 53\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 61\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), showVoice && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voice-recorder\",\n      children: voice.isRecording ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recording-active\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rec-dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rec-timer\",\n          children: voice.formatDuration(voice.duration)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.stopRecording,\n          className: \"stop-rec-btn\",\n          children: \"\\u23F9 Stop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }, this) : voice.audioUrl ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"audio-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          src: voice.audioUrl,\n          controls: true,\n          className: \"audio-preview-player\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: sendVoiceMessage,\n          className: \"send-voice-btn\",\n          disabled: uploading,\n          children: uploading ? '‚è≥' : '‚û§ Envoyer'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.cancelRecording,\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"start-recording\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: voice.startRecording,\n          className: \"start-rec-btn\",\n          children: \"\\uD83C\\uDFA4 Enregistrer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onPointerDown: () => setShowVoice(false),\n          className: \"cancel-rec-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"message-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `voice-toggle-btn ${showVoice ? 'active' : ''}`,\n        onPointerDown: () => setShowVoice(!showVoice),\n        title: \"Message vocal\",\n        children: \"\\uD83C\\uDFA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"file-btn\",\n        onPointerDown: () => {\n          var _fileInputRef$current;\n          return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n        },\n        title: \"Joindre un fichier\",\n        disabled: uploading,\n        children: uploading ? '‚è≥' : 'üìé'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        accept: \"image/*,.pdf,.zip,.doc,.docx,.xls,.xlsx,.txt\",\n        onChange: handleFileChange,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: `Message √† ${selectedUser.username}...`,\n        value: text,\n        onChange: handleTextChange,\n        className: \"text-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-btn\",\n        disabled: !text.trim(),\n        children: \"\\u27A4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"ZHpbsctarH1AT5pD9LD94B21jdU=\", false, function () {\n  return [useAuth, useSocket, useVoiceMessage];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["useState","useRef","useEffect","useSocket","useAuth","useVoiceMessage","MessageBubble","jsxDEV","_jsxDEV","SERVER_URL","process","env","REACT_APP_SERVER_URL","ALLOWED_TYPES","ChatWindow","selectedUser","messages","onlineUsers","onStartCall","onBack","showBackButton","showToast","_s","user","socket","text","setText","isTyping","setIsTyping","showVoice","setShowVoice","uploading","setUploading","messagesEndRef","typingTimerRef","fileInputRef","voice","isOnline","includes","_id","_messagesEndRef$curre","current","scrollIntoView","behavior","on","userId","off","sendMessage","e","preventDefault","trim","emit","receiverId","content","type","sendVoiceMessage","audioBlob","formData","FormData","append","res","fetch","method","headers","Authorization","localStorage","getItem","body","data","json","audioUrl","message","resetAudio","err","title","handleFileChange","file","target","files","size","isImage","startsWith","fileUrl","fileName","fileSize","value","handleTextChange","clearTimeout","setTimeout","handleCall","stopPropagation","className","children","onClick","_jsxFileName","lineNumber","columnNumber","username","toUpperCase","onPointerDown","map","msg","i","_msg$sender","isOwn","sender","senderId","ref","isRecording","formatDuration","duration","stopRecording","cancelRecording","src","controls","disabled","startRecording","onSubmit","_fileInputRef$current","click","accept","onChange","style","display","placeholder","_c","$RefreshReg$"],"sources":["/home/voaybe/Documents/projet/real-time-chat-app/client/src/components/Chat/ChatWindow.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { useSocket } from '../../context/SocketContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { useVoiceMessage } from '../../hooks/useVoiceMessage';\nimport MessageBubble from './MessageBubble';\nimport './Chat.css';\n\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL || 'http://localhost:5000';\n\nconst ALLOWED_TYPES = [\n  'image/jpeg','image/png','image/gif','image/webp',\n  'application/pdf',\n  'application/zip','application/x-zip-compressed',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  'text/plain',\n];\n\nconst ChatWindow = ({ selectedUser, messages, onlineUsers, onStartCall, onBack, showBackButton, showToast }) => {\n  const { user }   = useAuth();\n  const { socket } = useSocket();\n  const [text,        setText]        = useState('');\n  const [isTyping,    setIsTyping]    = useState(false);\n  const [showVoice,   setShowVoice]   = useState(false);\n  const [uploading,   setUploading]   = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimerRef = useRef(null);\n  const fileInputRef   = useRef(null);\n  const voice          = useVoiceMessage();\n  const isOnline       = onlineUsers.includes(selectedUser._id);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('typing:start', ({ userId }) => { if (userId === selectedUser._id) setIsTyping(true);  });\n    socket.on('typing:stop',  ({ userId }) => { if (userId === selectedUser._id) setIsTyping(false); });\n    return () => { socket.off('typing:start'); socket.off('typing:stop'); };\n  }, [socket, selectedUser]);\n\n  // Envoyer message texte\n  const sendMessage = (e) => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    socket?.emit('message:send', { receiverId: selectedUser._id, content: text.trim(), type: 'text' });\n    setText('');\n    socket?.emit('typing:stop', { receiverId: selectedUser._id });\n  };\n\n  // Envoyer message vocal\n  const sendVoiceMessage = async () => {\n    if (!voice.audioBlob) return;\n    const formData = new FormData();\n    formData.append('audio', voice.audioBlob, 'voice-message.webm');\n    formData.append('receiverId', selectedUser._id);\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/voice`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true',\n        },\n        body: formData,\n      });\n      const data = await res.json();\n      socket?.emit('message:send', {\n        receiverId: selectedUser._id, content: '',\n        type: 'voice', audioUrl: data.message.audioUrl,\n      });\n      voice.resetAudio();\n      setShowVoice(false);\n    } catch (err) {\n      showToast({ title: 'Erreur', message: 'Impossible d\\'envoyer le message vocal', type: 'error' });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Envoyer fichier/image\n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    if (!ALLOWED_TYPES.includes(file.type)) {\n      showToast({ title: 'Format non support√©', message: 'Images, PDF, ZIP, Word, Excel, TXT seulement', type: 'warning' });\n      return;\n    }\n    if (file.size > 20 * 1024 * 1024) {\n      showToast({ title: 'Fichier trop lourd', message: 'Maximum 20MB', type: 'warning' });\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('receiverId', selectedUser._id);\n\n    try {\n      setUploading(true);\n      const res = await fetch(`${SERVER_URL}/api/messages/file`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`,\n          'ngrok-skip-browser-warning': 'true',\n        },\n        body: formData,\n      });\n      const data = await res.json();\n      const isImage = file.type.startsWith('image/');\n      socket?.emit('message:send', {\n        receiverId: selectedUser._id,\n        content:    '',\n        type:       isImage ? 'image' : 'file',\n        fileUrl:    data.message.fileUrl,\n        fileName:   data.message.fileName,\n        fileSize:   data.message.fileSize,\n      });\n      showToast({ title: 'Fichier envoy√© !', type: 'success' });\n    } catch (err) {\n      showToast({ title: 'Erreur upload', message: err.message, type: 'error' });\n    } finally {\n      setUploading(false);\n      e.target.value = '';\n    }\n  };\n\n  const handleTextChange = (e) => {\n    setText(e.target.value);\n    socket?.emit('typing:start', { receiverId: selectedUser._id });\n    clearTimeout(typingTimerRef.current);\n    typingTimerRef.current = setTimeout(() => {\n      socket?.emit('typing:stop', { receiverId: selectedUser._id });\n    }, 1500);\n  };\n\n  const handleCall = (type) => (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    onStartCall(type);\n  };\n\n  return (\n    <div className=\"chat-window\">\n      {/* Header */}\n      <div className=\"chat-header\">\n        <div className=\"chat-user-info\">\n          {showBackButton && (\n            <button className=\"back-btn\" onClick={onBack}>‚Üê</button>\n          )}\n          <div className=\"chat-avatar gradient-bg\">{selectedUser.username[0].toUpperCase()}</div>\n          <div>\n            <h3 className=\"gradient-text\">{selectedUser.username}</h3>\n            <span className={`chat-status ${isOnline ? 'online' : 'offline'}`}>\n              {isTyping ? '‚úçÔ∏è En train d\\'√©crire...' : isOnline ? '‚óè En ligne' : '‚óã Hors ligne'}\n            </span>\n          </div>\n        </div>\n        <div className=\"call-buttons\">\n          <button className=\"call-btn audio\" onPointerDown={handleCall('audio')} title=\"Appel vocal\">üìû</button>\n          <button className=\"call-btn video\" onPointerDown={handleCall('video')} title=\"Appel vid√©o\">üìπ</button>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"messages-container\">\n        {messages.map((msg, i) => (\n          <MessageBubble\n            key={msg._id || i}\n            message={msg}\n            isOwn={(msg.sender?._id || msg.sender) === user._id || msg.senderId === user._id}\n          />\n        ))}\n        {isTyping && (\n          <div className=\"typing-indicator\"><span /><span /><span /></div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Voice recorder */}\n      {showVoice && (\n        <div className=\"voice-recorder\">\n          {voice.isRecording ? (\n            <div className=\"recording-active\">\n              <div className=\"rec-dot\" />\n              <span className=\"rec-timer\">{voice.formatDuration(voice.duration)}</span>\n              <button onPointerDown={voice.stopRecording}    className=\"stop-rec-btn\">‚èπ Stop</button>\n              <button onPointerDown={voice.cancelRecording}  className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          ) : voice.audioUrl ? (\n            <div className=\"audio-preview\">\n              <audio src={voice.audioUrl} controls className=\"audio-preview-player\" />\n              <button onPointerDown={sendVoiceMessage}       className=\"send-voice-btn\" disabled={uploading}>\n                {uploading ? '‚è≥' : '‚û§ Envoyer'}\n              </button>\n              <button onPointerDown={voice.cancelRecording}  className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          ) : (\n            <div className=\"start-recording\">\n              <button onPointerDown={voice.startRecording}   className=\"start-rec-btn\">üé§ Enregistrer</button>\n              <button onPointerDown={() => setShowVoice(false)} className=\"cancel-rec-btn\">‚úï</button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Input */}\n      <form onSubmit={sendMessage} className=\"message-input\">\n        {/* Bouton micro */}\n        <button\n          type=\"button\"\n          className={`voice-toggle-btn ${showVoice ? 'active' : ''}`}\n          onPointerDown={() => setShowVoice(!showVoice)}\n          title=\"Message vocal\"\n        >üé§</button>\n\n        {/* Bouton fichier */}\n        <button\n          type=\"button\"\n          className=\"file-btn\"\n          onPointerDown={() => fileInputRef.current?.click()}\n          title=\"Joindre un fichier\"\n          disabled={uploading}\n        >\n          {uploading ? '‚è≥' : 'üìé'}\n        </button>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"image/*,.pdf,.zip,.doc,.docx,.xls,.xlsx,.txt\"\n          onChange={handleFileChange}\n          style={{ display: 'none' }}\n        />\n\n        {/* Texte */}\n        <input\n          type=\"text\"\n          placeholder={`Message √† ${selectedUser.username}...`}\n          value={text}\n          onChange={handleTextChange}\n          className=\"text-input\"\n        />\n\n        {/* Envoyer */}\n        <button type=\"submit\" className=\"send-btn\" disabled={!text.trim()}>‚û§</button>\n      </form>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}